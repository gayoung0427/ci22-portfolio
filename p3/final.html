<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collection of Insect</title>
    <link rel="stylesheet" href="final.css">
    <!-- <script src="final.js"></script> -->
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
    <img id='backgroundimg'></img>
    
    <button class="randombtn">
        <span class="button_top2">Insect</span>
    </button>

    <ul id="contents">
    
    </ul>
    
    <template id="image-block">
        <li class="block block--image">
        <img class="block__image" src="">
        </li>
    </template>
    
    <button class="dropdown_insect" onclick="dropdown()">
        <span class="button_top2" >+</span>
    </button>

    <div id="insectlists" style="display:none">
        <button class="insect randomstickbug">
            <span class="button_top">Stick Bug</span>
        </button>
        <button class="insect randomspider">
            <span class="button_top">Spider</span>
        </button>
        <button class="insect randommoth">
            <span class="button_top">Moth</span>
        </button>
        <button class="insect randombeetle">
            <span class="button_top">Beetle</span>
        </button>
        <button class="insect randomcaterpillar">
            <span class="button_top">Caterpillar</span>
        </button>
        <button class="insect randombutterfly">
            <span class="button_top">Butterfly</span>
        </button>
        <button class="insect randomgrasshopper">
            <span class="button_top">Grasshopper</span>
        </button>
        <button class="insect randomworm">
            <span class="button_top">Worm</span>
        </button>
        <button class="insect randomdragonfly">
            <span class="button_top">Dragonfly</span>
        </button>
        <button class="insect randomsnail">
            <span class="button_top">Snail</span>
        </button>
    </div>

        <button class="btn">
            <a href="#demo-modal" class="button_top2">?</a>
        </button>
    <div id="demo-modal" class="modal">
        <div class="modal__content">
            <h1>Collection of Insects</h1>
            <p>
                <br>
                Collection of Insects embodies diverse insects that are on top of human hand.
                This website explores 100 different insects within 10 type of insects around the world.
                Not only the insects, it defines the beauty and rarity of insects in the New York City.
                Each insect holds their own uniqueness and attraction in the nature.
                <br>
                <br>
                <p class="highlight">Explore the website by clicking on buttons!</p>
                <br>
                <br>
                <p class="credit">Made and designed by Gayoung Do. Referenced from Google Search and Are.Na</p>
            </p>
            <a href="#" class="modal__close">&times;</a>
        </div>
    </div>

<script>
    let randInt = 100;//was at 70
      randombtn = document.querySelector(".randombtn");
      randombtn.addEventListener("click", newNumb);
      let beetleBtn = document.querySelector(".randombeetle");
      beetleBtn.addEventListener("click",showBeetle);
      let stickbugBtn = document.querySelector(".randomstickbug");
      stickbugBtn.addEventListener("click",showStickbug);
      let spiderBtn = document.querySelector(".randomspider");
      spiderBtn.addEventListener("click",showSpider);
      let mothBtn = document.querySelector(".randommoth");
      mothBtn.addEventListener("click",showMoth);
      let caterpillarBtn = document.querySelector(".randomcaterpillar");
      caterpillarBtn.addEventListener("click",showCaterpillar);
      let butterflyBtn = document.querySelector(".randombutterfly");
      butterflyBtn.addEventListener("click",showButterfly);
      let grasshopperBtn = document.querySelector(".randomgrasshopper");
      grasshopperBtn.addEventListener("click",showGrasshopper);
      let wormBtn = document.querySelector(".randomworm");
      wormBtn.addEventListener("click",showWorm);
      let dragonflyBtn = document.querySelector(".randomdragonfly");
      dragonflyBtn.addEventListener("click",showDragonfly);
      let snailBtn = document.querySelector(".randomsnail");
      snailBtn.addEventListener("click",showSnail);

      let blocks = [];

      window.addEventListener('DOMContentLoaded', () => {
        const channel = 'insects-5_bu9j6ugpc';
        // setInterval(apicall,1000);
        // function apicall(){
          fetch(`https://api.are.na/v2/channels/${channel}?per=98`, {cache: 'no-store'})
          .then(response => response.json())
          .then(data => {
           // console.log(data);
            console.log(data['contents']);
            //renderTitle(data);
          //  renderBlocks(data);
            blocks = data['contents'];
          });
        // }
        });
        
      const renderTitle = (data) => {
        let title = data['title'];
        document.getElementById('channel-title').innerText = title;
      };

      const renderBlocks = (data) => {
        let blocks = data['contents'];

       console.log(blocks[randInt]);
       renderImage(blocks[randInt]);
      };

      function newNumb(){
        randInt = Math.floor(Math.random() * blocks.length);
        if(document.querySelector('li')) {
          document.querySelector('li').remove();
        }
        renderImage(blocks[randInt]);
      }

      const renderImage = (block) => {
        let imageUrl = block['image']['display']['url'];
        let imgdescription = block['description'];
        let imageBlockTemplate = document.getElementById('image-block');
        let insectImg = document.querySelector('img');
        let clone = imageBlockTemplate.content.cloneNode(true);

        let title = block['title'];
        console.log(title);

        clone.querySelector('img').src = imageUrl;

        if (imgdescription == "right") {
            clone.querySelector('img').style.float = "right";
        }

        document.getElementById('contents').appendChild(clone);
      };

      function showBeetle(block){
        let beetleRange = blocks.slice(89,99);
        randInt = Math.floor(Math.random() * beetleRange.length);
        if(document.querySelector('li')) {
          document.querySelector('li').remove();
        }
        renderImage(beetleRange[randInt]);
      }

      function showStickbug(block){
        let stickbugRange = blocks.slice(69,78);
        randInt = Math.floor(Math.random() * stickbugRange.length);
        if(document.querySelector('li')) {
          document.querySelector('li').remove();
        }
        renderImage(stickbugRange[randInt]);
      }

      function showSpider(block){
        let spiderRange = blocks.slice(59,68);
        randInt = Math.floor(Math.random() * spiderRange.length);
        if(document.querySelector('li')) {
          document.querySelector('li').remove();
        }
        renderImage(spiderRange[randInt]);
      }

      function showMoth(block){
        let mothRange = blocks.slice(50,58);
        randInt = Math.floor(Math.random() * mothRange.length);
        if(document.querySelector('li')) {
          document.querySelector('li').remove();
        }
        renderImage(mothRange[randInt]);
      }

      function showCaterpillar(block){
        let caterpillarRange = blocks.slice(39,49);
        randInt = Math.floor(Math.random() * caterpillarRange.length);
        if(document.querySelector('li')) {
          document.querySelector('li').remove();
        }
        renderImage(caterpillarRange[randInt]);
      }

      function showButterfly(block){
        let butterflyRange = blocks.slice(79,88);
        randInt = Math.floor(Math.random() * butterflyRange.length);
        if(document.querySelector('li')) {
          document.querySelector('li').remove();
        }
        renderImage(butterflyRange[randInt]);
      }

      function showGrasshopper(block){
        let grasshopperRange = blocks.slice(29,38);
        randInt = Math.floor(Math.random() * grasshopperRange.length);
        if(document.querySelector('li')) {
          document.querySelector('li').remove();
        }
        renderImage(grasshopperRange[randInt]);
      }

      function showWorm(block){
        let wormRange = blocks.slice(19,28);
        randInt = Math.floor(Math.random() * wormRange.length);
        if(document.querySelector('li')) {
          document.querySelector('li').remove();
        }
        renderImage(wormRange[randInt]);
      }

      function showDragonfly(block){
        let dragonflyRange = blocks.slice(0,9);
        randInt = Math.floor(Math.random() * dragonflyRange.length);
        if(document.querySelector('li')) {
          document.querySelector('li').remove();
        }
        renderImage(dragonflyRange[randInt]);
      }

      function showSnail(block){
        let snailRange = blocks.slice(10,18);
        randInt = Math.floor(Math.random() * snailRange.length);
        if(document.querySelector('li')) {
          document.querySelector('li').remove();
        }
        renderImage(snailRange[randInt]);
      }
</script>
<script src="final.js"></script>
</body>
</html>